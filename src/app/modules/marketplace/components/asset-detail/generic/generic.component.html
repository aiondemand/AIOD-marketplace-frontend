<div *ngFor="let item of items">
  <div *ngFor="let col of columns" class="item-info-body">
    <!-- Column Container -->
    <div
      *ngIf="shouldShowColumn(col, item)"
      class="item-info-container col"
      [ngClass]="getThemeClass()"
    >
      <h3>{{ formatColumnName(col) }}</h3>
        <!-- Array Type -->
        <div *ngIf="isArrayType(col, item)">
          <ng-container *ngIf="col === 'relevant_link'; else normalArray">
            <a
              *ngFor="let arrayItem of getArrayValues(item[col]); let last = last"
              [ngClass]="col"
              [href]="arrayItem"
              target="_blank"
              rel="noopener noreferrer"
            >
            </a>
          </ng-container>
          <ng-template #normalArray>
        <span *ngFor="let arrayItem of getArrayValues(item[col]); let last = last" [ngClass]="getThemeClass()">
            {{ arrayItem }}<span *ngIf="!last" [ngClass]="getThemeClass()">, </span>
        </span>
          </ng-template>
        </div>
        <!-- Distribution Type -->
        <div *ngIf="isDistributionType(col)" class="object-array-media">
          <div *ngFor="let dist of item[col]" class="media-card">
            <h3 class="media-title">{{ dist.name || 'Distribution' }}</h3>
            <div class="media-content">
              <!-- Description Section -->
              <div
                *ngIf="dist.description"
                class="media-section"
              >
                <div 
                  class="media-header" 
                  role="button"
                  tabindex="0"
                  (click)="toggleState(dist, 'showDescription')"
                  (keydown.enter)="toggleState(dist, 'showDescription')"
                  (keydown.space)="$event.preventDefault(); toggleState(dist, 'showDescription')"
                  style="display: flex; align-items: center; justify-content: space-between; width: 100%; cursor: pointer">
                  <span class="media-desc-label">Description</span>
                  <mat-icon
                    class="media-desc-arrow"
                    [attr.aria-label]="getExpandIconLabel(dist.showDescription)"
                    [style.transform]="getExpandIconTransform(dist.showDescription)"
                    [style.transition]="'transform 180ms ease'"
                    [style.color]="'#5bc0f7'"
                  >
                    expand_more
                  </mat-icon>
                </div>
                <div class="dropdown-content" [ngClass]="{ 'animate-dropdown': dist.showDescription }">
                  <p class="media-description">{{ dist.description }}</p>
                </div>
              </div>
              <!-- Properties Section -->
              <div
                class="media-section"
              >
                <div 
                  class="media-header"
                  role="button"
                  tabindex="0"
                  (click)="toggleState(dist, 'showProperties')"
                  (keydown.enter)="toggleState(dist, 'showProperties')"
                  (keydown.space)="$event.preventDefault(); toggleState(dist, 'showProperties')"
                  style="display: flex; align-items: center; justify-content: space-between; width: 100%; cursor: pointer">
                  <span class="media-properties-label">Properties</span>
                  <mat-icon
                    class="media-properties-arrow"
                    [attr.aria-label]="getExpandIconLabel(dist.showProperties)"
                    [style.transform]="getExpandIconTransform(dist.showProperties)"
                    [style.transition]="'transform 180ms ease'"
                    [style.color]="'#5bc0f7'"
                  >
                    expand_more
                  </mat-icon>
                </div>
                <!-- Properties List -->
                <div class="media-properties-list dropdown-content" [ngClass]="{ 'animate-dropdown': dist.showProperties }" style="overflow-y: auto;">
                  <div *ngIf="dist.encoding_format" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ dist.encoding_format }}</div>
                    <div class="media-property-label">Encoding Format</div>
                  </div>
                  <div *ngIf="dist.checksum" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ dist.checksum }}</div>
                    <div class="media-property-label">Checksum</div>
                  </div>
                  <div *ngIf="dist.checksum_algorithm" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ dist.checksum_algorithm }}</div>
                    <div class="media-property-label">Checksum Algorithm</div>
                  </div>
                  <div *ngIf="dist.content_url" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">
                      <a [href]="dist.content_url" target="_blank">{{ dist.content_url }}</a>
                    </div>
                    <div class="media-property-label">Content URL</div>
                  </div>
                  <div *ngIf="dist.dependency" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ dist.dependency }}</div>
                    <div class="media-property-label">Dependency</div>
                  </div>
                  <div *ngIf="dist.technology_readiness_level" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ dist.technology_readiness_level }}</div>
                    <div class="media-property-label">Technology Readiness Level</div>
                  </div>
                  <div *ngIf="dist.hardware_requirement" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ dist.hardware_requirement }}</div>
                    <div class="media-property-label">Hardware Requirement</div>
                  </div>
                  <div *ngIf="dist.os_requirement" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ dist.os_requirement }}</div>
                    <div class="media-property-label">OS Requirement</div>
                  </div>
                  <div *ngIf="dist.installation" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ dist.installation }}</div>
                    <div class="media-property-label">Installation</div>
                  </div>
                  <div *ngIf="dist.installation_script" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ dist.installation_script }}</div>
                    <div class="media-property-label">Installation Script</div>
                  </div>
                  <div *ngIf="dist.deployment" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ dist.deployment }}</div>
                    <div class="media-property-label">Deployment</div>
                  </div>
                  <div *ngIf="dist.deployment_script" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ dist.deployment_script }}</div>
                    <div class="media-property-label">Deployment Script</div>
                  </div>
                  <div *ngIf="dist.content_size_kb" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ dist.content_size_kb }}</div>
                    <div class="media-property-label">Content Size (KB)</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Object Array Type (Media) -->
        <div *ngIf="isObjectArrayType(col, item)" class="object-array-media">
          <div *ngFor="let obj of item[col]" class="media-card">
            <h3 class="media-title">{{ getMediaName() }}</h3>
            <div class="media-content">
              <!-- Description Section -->
              <div
                *ngIf="obj.description"
                class="media-section"
              >
                <div 
                  class="media-header"
                  role="button"
                  tabindex="0"
                  (click)="toggleState(obj, 'showDescription')"
                  (keydown.enter)="toggleState(obj, 'showDescription')"
                  (keydown.space)="$event.preventDefault(); toggleState(obj, 'showDescription')"
                  style="display: flex; align-items: center; justify-content: space-between; width: 100%; cursor: pointer">
                  <span class="media-desc-label">Description</span>
                  <mat-icon
                    class="media-desc-arrow"
                    [attr.aria-label]="getExpandIconLabel(obj.showDescription)"
                    [style.transform]="getExpandIconTransform(obj.showDescription)"
                    [style.transition]="'transform 180ms ease'"
                    [style.color]="'#5bc0f7'"
                  >
                    expand_more
                  </mat-icon>
                </div>
                <div class="dropdown-content" [ngClass]="{ 'animate-dropdown': obj.showDescription }">
                  <p class="media-description">{{ obj.description }}</p>
                </div>
              </div>

              <!-- Properties Section -->
              <div
                *ngIf="hasMediaProperties(obj)"
                class="media-section"
              >
                <div 
                  class="media-header"
                  role="button"
                  tabindex="0"
                  (click)="toggleState(obj, 'showProperties')"
                  (keydown.enter)="toggleState(obj, 'showProperties')"
                  (keydown.space)="$event.preventDefault(); toggleState(obj, 'showProperties')"
                  style="display: flex; align-items: center; justify-content: space-between; width: 100%; cursor: pointer">
                  <span class="media-properties-label">Properties</span>
                  <mat-icon
                    class="media-properties-arrow"
                    [attr.aria-label]="getExpandIconLabel(obj.showProperties)"
                    [style.transform]="getExpandIconTransform(obj.showProperties)"
                    [style.transition]="'transform 180ms ease'"
                    [style.color]="'#5bc0f7'"
                  >
                    expand_more
                  </mat-icon>
                </div>

                <!-- Properties List -->
                <div class="media-properties-list dropdown-content" [ngClass]="{ 'animate-dropdown': obj.showProperties }">
                  <div *ngIf="obj.checksum_algorithm" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ obj.checksum_algorithm }}</div>
                    <div class="media-property-label">Checksum Algorithm</div>
                  </div>
                  <div *ngIf="obj.content_size_kb" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ obj.content_size_kb }}</div>
                    <div class="media-property-label">Content size (KB)</div>
                  </div>
                  <div *ngIf="obj.content_url" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">
                      <a [href]="obj.content_url" target="_blank">{{ obj.content_url }}</a>
                    </div>
                    <div class="media-property-label">Content URL</div>
                  </div>
                  <div *ngIf="obj.copyright" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ obj.copyright }}</div>
                    <div class="media-property-label">Copyright</div>
                  </div>
                  <div *ngIf="obj.date_published" class="media-property" [ngClass]="getThemeClass()">
                    <div class="media-property-value">{{ obj.date_published }}</div>
                    <div class="media-property-label">Date Published</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Source Link -->
            <div style="padding-top: 2rem">
              <a *ngIf="obj.content_url" [href]="obj.content_url" style="color: #41b6e6" target="_blank">
                <mat-icon style="vertical-align: middle; font-size: 16px; height: unset">open_in_new</mat-icon>
                <span style="margin-left: 6px; vertical-align: middle">Source</span>
              </a>
            </div>
          </div>
        </div>

        <!-- Special Column Types with Markdown -->
        <markdown *ngIf="col === 'description'" class="markdown-white">
          {{ getDescription(item) }}
        </markdown>

        <markdown *ngIf="col === 'license'" class="license" style="color: blue">
          {{ item[col] }}
        </markdown>

        <markdown *ngIf="col === 'same_as'" class="same_as">
          {{ item[col] }}
        </markdown>

        <markdown *ngIf="col === 'execution_settings'" class="execution_settings" [ngClass]="getThemeClass()">
          {{ item[col] }}
        </markdown>
        <div *ngIf="col === 'badge'">
          <markdown
            *ngFor="let badgeItem of getArrayValues(item[col])"
            class="asset-property"
            [ngClass]="getThemeClass()"
          >
            {{ badgeItem }}
          </markdown>
        </div>
        <markdown *ngIf="col === 'type'" class="asset-property">
          {{ item[col] }}
        </markdown>
        <markdown *ngIf="getValueType(item[col]) === VALUE_TYPES.TEXT  && col === 'target_group'" class="asset-property">
          {{ item[col] }}
        </markdown>
    </div>
  </div>
</div>
